@inherits StoreComponent<List<ITrace>>

<Chart Data="@Model" Type="front" Height="@(Height ?? 500)" ShowGrid="true"/>

@code 
{
    [Parameter] public int? Height { get; set; }

    protected override IObservable<List<ITrace>> Select() =>
        Store.Select(state =>
        {
            var points = state.Runs.TryGetValue(state.CurrentRunId, out var run)
                ? run.Outputs.ParetoFrontOutput.Front.Select(val => val.Select(inner => (double) inner).ToArray()).ToList()
                : new List<double[]>();


            return new List<ITrace>
            {
                new Scatter3D
                {
                    Mode = Plotly.Blazor.Traces.Scatter3DLib.ModeFlag.Markers,
                    X = points.Select(val => (object) val[0]).ToList(),
                    Y = points.Select(val => (object) val[1]).ToList(),
                    Z = points.Select(val => (object) val[2]).ToList(),
                }
            };
        });

}