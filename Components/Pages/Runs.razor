@page "/runs/{runId:guid}/test/{modelType}"
@rendermode InteractiveServer
@using Radiate.Client.Domain.Templates
@using Radiate.Client.Domain.Store.Selections
@using Radiate.Client.Domain.Store.Schema
@inherits StoreComponent<IRunTemplate>

<MudContainer Class="mt-4 px-8" MaxWidth="MaxWidth.False">
    <MudGrid>
        <MudItem md="8">
            <MudExpansionPanels Dense="true" Elevation="2" MultiExpansion="true">
                @foreach (var panel in Model.UI.LeftSideAccordion.ExpansionPanels)
                {
                    <MudExpansionPanel IsExpanded="@panel.IsOpen" @key="panel.Id">
                        <TitleContent>
                            @panel.Title
                        </TitleContent>
                        <ChildContent>
                            <PanelDisplay PanelName="@panel.ExpansionPanel.Name"/>
                        </ChildContent>
                    </MudExpansionPanel>
                }
            </MudExpansionPanels>
        </MudItem>
        <MudItem md="4">
            <MudExpansionPanels Dense="true" Elevation="2" MultiExpansion="true">
                @foreach (var panel in Model.UI.RightSideAccordion.ExpansionPanels)
                {
                    <MudExpansionPanel IsExpanded="@panel.IsOpen" @key="panel.Id">
                        <TitleContent>
                            @panel.Title
                        </TitleContent>
                        <ChildContent>
                            <PanelDisplay PanelName="@panel.ExpansionPanel.Name"/>
                        </ChildContent>
                    </MudExpansionPanel>
                }
            </MudExpansionPanels>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    [Parameter] public Guid RunId { get; set; }
    [Parameter] public string ModelType { get; set; }

    protected override IObservable<IRunTemplate> Select() => Store.Select(UiSelectors.SelectRunTemplate);
}
